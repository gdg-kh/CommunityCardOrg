<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <link href="../bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../index.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 高雄社群名牌卡 - 卡片與守則</title>
    <style>
        /* 導覽列樣式調整 - 使用 Grid 強制四等分 */
        .nav-pills {
            margin-bottom: 20px;
            display: grid !important; /* 強制使用 Grid */
            grid-template-columns: repeat(4, 1fr); /* 嚴格四等分 */
            gap: 10px; /* 按鈕間距 */
            width: 100%;
        }
        .nav-item {
            width: auto; /* 讓 Grid 控制寬度 */
            text-align: center;
        }
        .nav-pills .nav-link {
            color: #555;
            background-color: #eee;
            border-radius: 8px;
            width: 100%;
            height: 100%; /* 確保按鈕高度一致 */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 2px;
        }
        
        /* 移除通用的 active 顏色，改用個別設定 */
        /* .nav-pills .nav-link.active { ... } */

        /* 1. 2026 卡片與守則 */
        .nav-item:nth-child(1) .nav-link.active {
            background-color: #4285f4;
            color: #fff;
        }
        /* 2. 集章獎勵 */
        .nav-item:nth-child(2) .nav-link.active {
            background-color: #34a853;
            color: #fff;
        }
        /* 3. 社群介紹 */
        .nav-item:nth-child(3) .nav-link.active {
            background-color: #f9ab00;
            color: #fff;
        }
        /* 4. 贊助商 */
        .nav-item:nth-child(4) .nav-link.active {
            background-color: #ea4335;
            color: #fff;
        }

        /* Stamp Feature Styles */
        #stamp-toolbar {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 8px;
            border: 1px dashed #ccc;
            width: 100%;
        }
        .stamp-option {
            width: 45px;
            height: 45px;
            object-fit: contain;
            cursor: pointer;
            border: 2px solid transparent;
            border-radius: 8px;
            padding: 4px;
            background: white;
            transition: all 0.2s;
        }
        .stamp-option:hover {
            transform: scale(1.1);
        }
        .stamp-option.selected {
            border-color: #4285f4;
            box-shadow: 0 0 5px rgba(66, 133, 244, 0.5);
            background-color: #e8f0fe;
        }
        #card-area {
            position: relative;
            display: block; 
            cursor: crosshair; /* Indicate clickable */
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden; /* Contains stamps */
        }
        #card-area img.base-card {
            display: block;
            width: 100%;
            height: auto;
        }
        /* Override inline style for wrapper */
        .imageContainer {
            flex-direction: column; /* Stack toolbar and card */
            gap: 15px;
        }
        .stamp-mark {
            position: absolute;
            width: 60px; /* Adjust stamp size */
            height: 60px;
            object-fit: contain;
            transform-origin: center center;
            pointer-events: none; 
            opacity: 0.9;
            mix-blend-mode: multiply; /* Make it look like ink */
            animation: stamp-pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            filter: contrast(1.2) brightness(0.9); /* Slight ink effect */
        }
        @keyframes stamp-pop {
            0% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0.9; }
        }
        #clear-stamps {
            padding: 8px 20px;
            background-color: #ea4335;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s;
            margin-bottom: 20px;
        }
        #clear-stamps:hover {
            background-color: #c5221f;
        }
    </style>
</head>
<body>
    <div class="cardWrapper">
        <!-- 導覽列 -->
        <ul class="nav nav-pills nav-fill">
            <li class="nav-item">
                <a class="nav-link active" href="index.html">2026 卡片與守則</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="rewards.html">集章獎勵</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="communities.html">社群介紹</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="sponsors.html">贊助商</a>
            </li>
        </ul>

        <div class="card">
            <h1 class="title"><span class="specialColor">2026 高雄社群</span>名牌卡守則</h1>
            
            <div class="imageContainer">
                <!-- Stamp Toolbar -->
                <div id="stamp-toolbar">
                    <!-- Stamps will be injected here via JS -->
                </div>

                <!-- Interactive Card Area -->
                <div id="card-area" style="width: 100%;">
                    <img class="base-card" src="../assets/print_community_card_forward_300dpi_2026.png" alt="2026 正面">
                </div>

                <button id="clear-stamps">清除印章</button>
            </div>

            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const stamps = [
                        '../assets/logo_agile_south_taiwan.png',
                        '../assets/logo_cdc_v2.png',
                        '../assets/logo_developer_buffet.png',
                        '../assets/logo_gdg_kaohsiung.png',
                        '../assets/logo_kalug.jpg',
                        '../assets/logo_kaohsiung_word_press.png',
                        '../assets/logo_kimu.png',
                        '../assets/logo_pyladies_kh.png',
                        '../assets/logo_second_space.png'
                    ];

                    let currentStampSrc = stamps[0];
                    const toolbar = document.getElementById('stamp-toolbar');
                    const cardArea = document.getElementById('card-area');

                    // Initialize Toolbar
                    stamps.forEach((src, index) => {
                        const img = document.createElement('img');
                        img.src = src;
                        img.className = 'stamp-option';
                        img.title = src.split('/').pop().replace('logo_', '').replace(/_/g, ' ').replace('.png', '').replace('.jpg', '');
                        if (index === 0) img.classList.add('selected');
                        
                        img.addEventListener('click', function() {
                            document.querySelectorAll('.stamp-option').forEach(el => el.classList.remove('selected'));
                            this.classList.add('selected');
                            currentStampSrc = src;
                        });
                        
                        toolbar.appendChild(img);
                    });

                    // Handle Stamping
                    cardArea.addEventListener('click', function(e) {
                        if (!currentStampSrc) return;

                        const rect = cardArea.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;

                        const xPercent = (x / rect.width) * 100;
                        const yPercent = (y / rect.height) * 100;

                        const stamp = document.createElement('img');
                        stamp.src = currentStampSrc;
                        stamp.className = 'stamp-mark';
                        
                        // Disable CSS animation to avoid conflict with Web Animations API
                        stamp.style.animation = 'none';

                        // Random rotation
                        const rotation = Math.floor(Math.random() * 41) - 20; // -20 to 20 deg
                        
                        stamp.style.left = xPercent + '%';
                        stamp.style.top = yPercent + '%';
                        
                        // Use Web Animations API for entrance with dynamic rotation
                        stamp.animate([
                            { transform: `translate(-50%, -50%) rotate(${rotation}deg) scale(2)`, opacity: 0 },
                            { transform: `translate(-50%, -50%) rotate(${rotation}deg) scale(1)`, opacity: 0.9 }
                        ], {
                            duration: 300,
                            easing: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',
                            fill: 'forwards'
                        });

                        cardArea.appendChild(stamp);
                    });

                    // Clear Stamps
                    document.getElementById('clear-stamps').addEventListener('click', function() {
                        const marks = document.querySelectorAll('.stamp-mark');
                        marks.forEach(mark => mark.remove());
                    });
                });
            </script>

            <div class="divider"></div>

            <p>這是一個基於有趣而誕生的活動，每一位參加社群活動的成員都可以依照自己的自由意志紀錄並收集今年的歷程。請應遵守以下守則：</p>
            <ol>
                <li>請保持愉悅的心情，使用本卡記錄 2026 年社群活動之歷程。</li>
                <li>參加活動旨在有趣，記錄仍應遵守以下方法：活動名稱書寫在左側虛線欄位，活動日期紀錄於右側實線欄位。</li>
                <li>加入任何社群請參考上方「社群」選單。</li>
                <li>社群是一個互助合作的平台，凡曾參與之高雄社群活動，皆可登錄本卡，不需過問任何人意見。</li>
                <li>群聚彼此的智慧與熱情，本卡持有人擁有隨時修訂本守則之能力。</li>
            </ol>

            <div class="divider"></div>

            <h2 class="communitiesTitle">檔案下載</h2>
            <p>想要自己印嗎？以下是印刷規格與檔案：</p>
            <ul style="display: block; padding-left: 40px;">
                <li><strong>規格：</strong>A4 象牙卡 230P / 單面彩色列印 / 十字裁切</li>
                <li><strong>正面檔案：</strong><a href="../assets/print_community_card_forward_2026.pdf" target="_blank">下載 2026 PDF</a></li>
            </ul>
        </div>
    </div>
</body>
</html>