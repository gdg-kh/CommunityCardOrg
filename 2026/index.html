<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <link href="../bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../index.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      content="2026 é«˜é›„ç¤¾ç¾¤åç‰Œå¡ï¼Œç´€éŒ„ä½ çš„ç¤¾ç¾¤æ­·ç¨‹ã€‚é€™æ˜¯ä¸€å€‹åŸºæ–¼æœ‰è¶£è€Œèª•ç”Ÿçš„æ´»å‹•ï¼Œæ¯ä¸€ä½åƒåŠ ç¤¾ç¾¤æ´»å‹•çš„æˆå“¡éƒ½å¯ä»¥ä¾ç…§è‡ªå·±çš„è‡ªç”±æ„å¿—ç´€éŒ„ä¸¦æ”¶é›†ä»Šå¹´çš„æ­·ç¨‹ã€‚"
      name="description"
    />
    <meta content="é«˜é›„ç¤¾ç¾¤, åç‰Œå¡, ç¤¾ç¾¤æ´»å‹•, æŠ€è¡“ç¤¾ç¾¤, è»Ÿé«”ç¤¾ç¾¤, é«˜é›„, Kaohsiung Community Card" name="keywords" />
    <meta content="é«˜é›„ç¤¾ç¾¤åç‰Œå¡" property="og:title" />
    <meta
      content="2026 é«˜é›„ç¤¾ç¾¤åç‰Œå¡ï¼Œç´€éŒ„ä½ çš„ç¤¾ç¾¤æ­·ç¨‹ã€‚é€™æ˜¯ä¸€å€‹åŸºæ–¼æœ‰è¶£è€Œèª•ç”Ÿçš„æ´»å‹•ï¼Œæ¯ä¸€ä½åƒåŠ ç¤¾ç¾¤æ´»å‹•çš„æˆå“¡éƒ½å¯ä»¥ä¾ç…§è‡ªå·±çš„è‡ªç”±æ„å¿—ç´€éŒ„ä¸¦æ”¶é›†ä»Šå¹´çš„æ­·ç¨‹ã€‚"
      property="og:description"
    />
    <meta content="website" property="og:type" />
    <meta content="https://community-card.org/2026/index.html" property="og:url" />
    <meta
      content="https://community-card.org/assets/print_community_card_forward_300dpi_2026.png"
      property="og:image"
    />
    <meta content="é«˜é›„ç¤¾ç¾¤åç‰Œå¡" property="og:site_name" />
    <title>é«˜é›„ç¤¾ç¾¤åç‰Œå¡</title>

    <style>
      /* å°è¦½åˆ—æ¨£å¼èª¿æ•´ - ä½¿ç”¨ Grid å¼·åˆ¶å››ç­‰åˆ† */
      .nav-pills {
        margin-bottom: 20px;
        display: grid !important;
        grid-template-columns: repeat(5, 1fr);
        gap: 10px;
        width: 100%;
      }

      .nav-item {
        width: auto;
        text-align: center;
      }

      .nav-pills .nav-link {
        color: #555;
        background-color: #eee;
        border-radius: 8px;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 10px 2px;
      }

      /* å€‹åˆ¥æŒ‰éˆ•é¡è‰² */
      .nav-item:nth-child(1) .nav-link.active {
        background-color: #4285f4;
        color: #fff;
      }
      .nav-item:nth-child(2) .nav-link.active {
        background-color: #a142f4;
        color: #fff;
      }
      .nav-item:nth-child(3) .nav-link.active {
        background-color: #34a853;
        color: #fff;
      }
      .nav-item:nth-child(4) .nav-link.active {
        background-color: #f9ab00;
        color: #fff;
      }
      .nav-item:nth-child(5) .nav-link.active {
        background-color: #ea4335;
        color: #fff;
      }

      /* Stamp Feature Styles */
      #stamp-toolbar {
        display: flex;
        flex-wrap: nowrap;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        gap: 15px;
        margin-bottom: 20px;
        padding: 15px;
        background: #f1f3f4;
        border-radius: 12px;
        border: 1px solid #dfe1e5;
        width: 100%;
        scrollbar-width: thin;
      }

      #stamp-toolbar::-webkit-scrollbar {
        height: 6px;
      }
      #stamp-toolbar::-webkit-scrollbar-thumb {
        background: #ccc;
        border-radius: 10px;
      }

      .stamp-option {
        flex: 0 0 auto;
        width: 65px;
        height: 65px;
        object-fit: contain;
        cursor: pointer;
        border: 3px solid transparent;
        border-radius: 12px;
        padding: 6px;
        background: white;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .stamp-option:hover {
        transform: scale(1.05);
      }
      .stamp-option.selected {
        border-color: #4285f4;
        box-shadow: 0 4px 10px rgba(66, 133, 244, 0.3);
        background-color: #e8f0fe;
        transform: translateY(-3px);
      }

      #card-area {
        position: relative;
        display: inline-block;
        max-width: 100%;
        cursor: crosshair;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        border-radius: 12px;
        overflow: hidden;
        line-height: 0;
      }

      #card-area img.base-card {
        display: block;
        max-width: 100%;
        height: auto;
      }

      .imageContainer {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .stamp-mark {
        position: absolute;
        width: 16%; /* åœ¨ Canvas ç¹ªåœ–é‚è¼¯ä¸­ä¹Ÿæœƒç”¨åˆ°é€™å€‹æ¯”ä¾‹ */
        height: auto;
        aspect-ratio: 1/1;
        object-fit: contain;
        transform-origin: center center;
        pointer-events: none;
        opacity: 0.9;
        mix-blend-mode: multiply; /* è¦–è¦ºä¸Šçš„æ··åˆæ¨¡å¼ */
        filter: contrast(1.2) brightness(0.9);
      }

      /* æŒ‰éˆ•æ¨£å¼ */
      #clear-stamps,
      #download-btn {
        padding: 8px 20px;
        color: white;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.2s;
        margin-bottom: 20px;
      }

      #clear-stamps {
        background-color: #ea4335;
      }
      #clear-stamps:hover {
        background-color: #c5221f;
      }

      #download-btn {
        background-color: #4285f4;
        margin-left: 10px;
      }
      #download-btn:hover {
        background-color: #3367d6;
      }
      #download-btn:disabled {
        background-color: #ccc;
        cursor: not-allowed;
      }

      .mobile-scroll-wrapper {
        width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        border-radius: 8px;
        text-align: center;
        padding: 10px 0;
      }

      @media (max-width: 768px) {
        #card-area {
          min-width: auto;
        }
        .stamp-mark {
          width: 56px;
          height: 56px;
        }
      }
    </style>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KCNJBYW13R"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-KCNJBYW13R');
    </script>
</head>

  <body>
    <div class="cardWrapper">
      <ul class="nav nav-pills nav-fill">
        <li class="nav-item">
          <a class="nav-link active" href="index.html">å¡ç‰‡èˆ‡å®ˆå‰‡</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="calendar.html">ç¤¾ç¾¤æœˆæ›†</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="rewards.html">é›†ç« çå‹µ</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="communities.html">ç¤¾ç¾¤ä»‹ç´¹</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="sponsors.html">è´ŠåŠ©å•†</a>
        </li>
      </ul>

      <div class="card">
        <h1 class="title"><span class="specialColor">é«˜é›„ç¤¾ç¾¤</span>åç‰Œå¡å®ˆå‰‡</h1>

        <div class="divider"></div>

        <p>
          é€™æ˜¯ä¸€å€‹åŸºæ–¼æœ‰è¶£è€Œèª•ç”Ÿçš„æ´»å‹•ï¼Œæ¯ä¸€ä½åƒåŠ ç¤¾ç¾¤æ´»å‹•çš„æˆå“¡éƒ½å¯ä»¥ä¾ç…§è‡ªå·±çš„è‡ªç”±æ„å¿—ç´€éŒ„ä¸¦æ”¶é›†ä»Šå¹´çš„æ­·ç¨‹ã€‚è«‹æ‡‰éµå®ˆä»¥ä¸‹å®ˆå‰‡ï¼š
        </p>
        <ol>
          <li>è«‹ä¿æŒæ„‰æ‚…çš„å¿ƒæƒ…ï¼Œä½¿ç”¨æœ¬å¡è¨˜éŒ„ä»Šå¹´ç¤¾ç¾¤æ´»å‹•ä¹‹æ­·ç¨‹ã€‚</li>
          <li>åƒåŠ æ´»å‹•æ—¨åœ¨æœ‰è¶£ï¼Œå¯ä»¥è“‹ç« æˆ–æ‰‹å¯«æ´»å‹•åç¨±å’Œæ—¥æœŸã€‚</li>
          <li>åŠ å…¥ä»»ä½•ç¤¾ç¾¤è«‹åƒè€ƒä¸Šæ–¹ã€Œç¤¾ç¾¤ä»‹ç´¹ã€åˆ—è¡¨</li>
          <li>ç¤¾ç¾¤æ˜¯ä¸€å€‹äº’åŠ©åˆä½œçš„å¹³å°ï¼Œå‡¡æ›¾åƒèˆ‡ä¹‹é«˜é›„ç¤¾ç¾¤æ´»å‹•ï¼Œçš†å¯ç™»éŒ„æœ¬å¡ï¼Œä¸éœ€éå•ä»»ä½•äººæ„è¦‹ã€‚</li>
          <li>ç¾¤èšå½¼æ­¤çš„æ™ºæ…§èˆ‡ç†±æƒ…ï¼Œæœ¬å¡æŒæœ‰äººæ“æœ‰éš¨æ™‚ä¿®è¨‚æœ¬å®ˆå‰‡ä¹‹èƒ½åŠ›ã€‚</li>
        </ol>

        <div class="divider"></div>

        <div class="imageContainer">
          <p class="text-center mb-2" style="font-size: 0.9rem; color: #666">
            æ“ä½œæŒ‡å¼•ï¼š1. é¸æ“‡ä¸‹æ–¹åœ–ç«  â†’ 2. é»æ“Šå¡ç‰‡è“‹ç« 
          </p>
          <div id="stamp-toolbar"></div>

          <div class="mobile-scroll-wrapper">
            <div id="card-area">
              <img class="base-card" src="../assets/print_community_card_forward_300dpi_2026.png" alt="2026 æ­£é¢" />
            </div>
          </div>

          <div style="text-align: center">
            <button id="clear-stamps">æ¸…é™¤å°ç« </button>
            <button id="download-btn">ä¸‹è¼‰åœ–ç‰‡</button>
          </div>
        </div>

        <script>
          document.addEventListener('DOMContentLoaded', function () {
            const stamps = [
              '../assets/stamps/seal_toocon.png',
              '../assets/stamps/seal_developer_buffet_blue.png',
              '../assets/stamps/seal_developer_buffet_black.png',
              '../assets/stamps/seal_developer_buffet_red.png',
              '../assets/stamps/logo_gdg_kaohsiung.png',
              '../assets/stamps/logo_second_space.png',
              '../assets/stamps/logo_kaohsiung_word_press_v2.png',
              '../assets/stamps/logo_pyladies_kh.png',
              '../assets/stamps/logo_developer_buffet_v2.png',
              '../assets/stamps/logo_cdc_v3.png',
              '../assets/stamps/logo_kimu.png',
              '../assets/stamps/logo_k_net.png',
              '../assets/stamps/logo_vscp.png',
              '../assets/stamps/logo_kalug.jpg',
              '../assets/stamps/logo_agile_south_taiwan.png',
              '../assets/stamps/logo_developer_buffet.png',
              '../assets/stamps/logo_kaohsiung_word_press.png',
            ]

            let currentStampSrc = stamps[0]
            const toolbar = document.getElementById('stamp-toolbar')
            const cardArea = document.getElementById('card-area')

            // 1. åˆå§‹åŒ–å·¥å…·åˆ—
            stamps.forEach((src, index) => {
              const img = document.createElement('img')
              img.src = src
              img.className = 'stamp-option'
              img.title = src
                .split('/')
                .pop()
                .replace('logo_', '')
                .replace(/_/g, ' ')
                .replace('.png', '')
                .replace('.jpg', '')
              if (index === 0) img.classList.add('selected')

              img.addEventListener('click', function () {
                document.querySelectorAll('.stamp-option').forEach((el) => el.classList.remove('selected'))
                this.classList.add('selected')
                currentStampSrc = src
              })

              toolbar.appendChild(img)
            })

            // 2. è™•ç†é»æ“Šè“‹ç«  (ç¶²é è¦–è¦ºæ•ˆæœ)
            cardArea.addEventListener('click', function (e) {
              if (!currentStampSrc) return

              const rect = cardArea.getBoundingClientRect()
              const x = e.clientX - rect.left
              const y = e.clientY - rect.top

              const xPercent = (x / rect.width) * 100
              const yPercent = (y / rect.height) * 100

              const stamp = document.createElement('img')
              stamp.src = currentStampSrc
              stamp.className = 'stamp-mark'

              // éš¨æ©Ÿæ—‹è½‰è§’åº¦ (-20åº¦ ~ 20åº¦)
              const rotation = Math.floor(Math.random() * 41) - 20

              // â˜… é—œéµï¼šå°‡æ—‹è½‰è§’åº¦å­˜å…¥ datasetï¼Œä¾›ä¸‹è¼‰åŠŸèƒ½è®€å–
              stamp.dataset.rotation = rotation

              // è¨­å®šä½ç½®
              stamp.style.left = xPercent + '%'
              stamp.style.top = yPercent + '%'

              // ä½¿ç”¨ Web Animations API è™•ç†é€²å ´å‹•ç•«
              stamp.animate(
                [
                  { transform: `translate(-50%, -50%) rotate(${rotation}deg) scale(2)`, opacity: 0 },
                  { transform: `translate(-50%, -50%) rotate(${rotation}deg) scale(1)`, opacity: 0.9 },
                ],
                {
                  duration: 300,
                  easing: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',
                  fill: 'forwards', // å‹•ç•«çµæŸå¾Œåœç•™åœ¨æœ€å¾Œç‹€æ…‹
                }
              )

              cardArea.appendChild(stamp)
            })

            // 3. æ¸…é™¤å°ç« 
            document.getElementById('clear-stamps').addEventListener('click', function () {
              const marks = document.querySelectorAll('.stamp-mark')
              marks.forEach((mark) => mark.remove())
            })

            // 4. ä¸‹è¼‰åœ–ç‰‡åŠŸèƒ½ (ä½¿ç”¨åŸç”Ÿ Canvas é‡ç¹ªï¼Œæ”¯æ´ Mix-Blend-Mode èˆ‡é«˜è§£æåº¦)
            document.getElementById('download-btn').addEventListener('click', async function () {
              const btn = this
              const originalText = btn.innerText
              btn.innerText = 'åœ–ç‰‡ç”Ÿæˆä¸­...'
              btn.disabled = true

              try {
                // A. å–å¾—åº•åœ–
                const baseImgElement = document.querySelector('#card-area .base-card')

                // å»ºç«‹ä¸€å€‹æ–°çš„ Image ç‰©ä»¶ä¾†ç²å–åŸå§‹è§£æåº¦
                const originalBaseImg = new Image()
                originalBaseImg.crossOrigin = 'anonymous'
                originalBaseImg.src = baseImgElement.src

                // ç­‰å¾…åº•åœ–è¼‰å…¥
                await new Promise((resolve, reject) => {
                  originalBaseImg.onload = resolve
                  originalBaseImg.onerror = reject
                })

                // B. å»ºç«‹é«˜è§£æåº¦ç•«å¸ƒ
                const canvas = document.createElement('canvas')
                const ctx = canvas.getContext('2d')
                const originalWidth = originalBaseImg.naturalWidth
                const originalHeight = originalBaseImg.naturalHeight

                canvas.width = originalWidth
                canvas.height = originalHeight

                // C. ç¹ªè£½åº•åœ–
                ctx.drawImage(originalBaseImg, 0, 0)

                // D. ç¹ªè£½å°ç«  (é–‹å•Ÿæ­£ç‰‡ç–Šåº•æ¨¡å¼)
                ctx.globalCompositeOperation = 'multiply'

                const stampElements = document.querySelectorAll('.stamp-mark')

                // ä¾åºè™•ç†æ¯å€‹å°ç« 
                const drawPromises = Array.from(stampElements).map(async (stampEl) => {
                  return new Promise((resolve) => {
                    const img = new Image()
                    img.crossOrigin = 'anonymous'
                    img.src = stampEl.src

                    img.onload = () => {
                      // è®€å–æ•¸æ“šï¼šè§’åº¦ã€ä½ç½®
                      const rotation = parseFloat(stampEl.dataset.rotation || 0)
                      const leftPercent = parseFloat(stampEl.style.left)
                      const topPercent = parseFloat(stampEl.style.top)

                      // è¨ˆç®—çµ•å°åº§æ¨™
                      const x = originalWidth * (leftPercent / 100)
                      const y = originalHeight * (topPercent / 100)

                      // è¨ˆç®—å°ç« å¤§å° (CSSè¨­å®šå¯¬åº¦ç‚ºå®¹å™¨çš„16%)
                      const stampWidth = originalWidth * 0.16
                      const stampHeight = stampWidth // æ­£æ–¹å½¢

                      // ç¹ªåœ–è®Šæ›çŸ©é™£
                      ctx.save()
                      ctx.translate(x, y)
                      ctx.rotate((rotation * Math.PI) / 180)

                      // ç¹ªè£½å°ç«  (å±…ä¸­ç¹ªè£½)
                      ctx.drawImage(img, -stampWidth / 2, -stampHeight / 2, stampWidth, stampHeight)

                      ctx.restore()
                      resolve()
                    }
                    img.onerror = resolve // å¤±æ•—ä¹Ÿç¹¼çºŒï¼Œé¿å…å¡ä½
                  })
                })

                await Promise.all(drawPromises)

                // E. è§¸ç™¼ä¸‹è¼‰
                const link = document.createElement('a')
                link.download = 'My_Community_Card_2026.png'
                link.href = canvas.toDataURL('image/png')
                link.click()
              } catch (err) {
                console.error('åœ–ç‰‡ç”Ÿæˆå¤±æ•—:', err)
                alert('åœ–ç‰‡ç”Ÿæˆå¤±æ•—ï¼Œè«‹æª¢æŸ¥ Console éŒ¯èª¤ã€‚è«‹ç¢ºä¿æ‚¨æ˜¯åœ¨ Local Server ç’°å¢ƒä¸‹åŸ·è¡Œã€‚')
              } finally {
                btn.innerText = originalText
                btn.disabled = false
              }
            })

            // 5. å½©è›‹ï¼šé»æ“Šæ¨™é¡Œé–‹å•Ÿéš±è—ä¸‹è¼‰å€
            const trigger = document.querySelector('.specialColor')
            const hiddenSection = document.getElementById('download-section')
            let clickCount = 0
            let clickTimer

            if (trigger && hiddenSection) {
              trigger.style.cursor = 'pointer'
              trigger.style.userSelect = 'none'

              trigger.addEventListener('click', function () {
                clickCount++
                clearTimeout(clickTimer)
                clickTimer = setTimeout(() => {
                  clickCount = 0
                }, 500)

                if (clickCount === 5) {
                  hiddenSection.style.display = 'block'
                  alert('ğŸ‰ å·²é–‹å•Ÿéš±è—ä¸‹è¼‰å€ï¼')
                  clickCount = 0
                  hiddenSection.scrollIntoView({ behavior: 'smooth' })
                }
              })
            }
          })
        </script>

        <div class="divider"></div>

        <div id="download-section" style="display: none">
          <div class="card">
            <h1 class="title">å¦‚ä½•è£½ä½œ<span class="specialColor">é«˜é›„ç¤¾ç¾¤</span>åç‰Œå¡</h1>
            <p>å»ºè­°åˆ—å°è¦æ ¼ï¼Œè·Ÿå°åˆ·åº—é€™æ¨£èªªï¼š</p>
            <ol>
              <li>ç´™å¼µå¤§å°ï¼šA4</li>
              <li>ç´™å¼µç¨®é¡ï¼šè±¡ç‰™ 230P</li>
              <li>åˆ—å°æ–¹å¼ï¼šå–®é¢å½©è‰²</li>
              <li>è£åˆ‡æ–¹å¼ï¼šåå­—è£åˆ‡</li>
            </ol>
            <p>æª”æ¡ˆä¸‹è¼‰ï¼š</p>
            <ol>
              <li>æ­£é¢ï¼š<a href="../assets/print_community_card_forward_2026.pdf" target="_blank">é»æˆ‘ä¸‹è¼‰</a></li>
            </ol>
            <p>å°åˆ·åº—ï¼šæ‰¾è‡ªå·±å¸¸å»çš„å°±å¥½ï¼Œæˆ‘ç¿’æ…£å»ç¶“å…¸æ•¸ä½å°åˆ·ï¼ŒåŠ  Line å¾Œå‚³æª”æ¡ˆçµ¦ä»–ï¼Œç­‰å°å¥½å†å»æ‹¿ï¼Œå¾ˆæ–¹ä¾¿ã€‚</p>
            <p>å…¶ä»–ï¼š</p>
            <ol>
              <li>å¯ä»¥è‡ªè¡Œè³¼è²·ã€ŒKW-triO 09772 è­‰ä»¶æ‰“å­”æ©Ÿã€ï¼ŒæŠŠå¡ç‰‡æ‰“æ´ï¼Œæ–¹ä¾¿å¤¾åŠç‰Œã€‚</li>
              <li>å¯ä»¥è‡ªè¡Œè³¼è²·ã€ŒTomato RZ-3 ä¸‰åˆä¸€åœ“è§’å™¨ã€æŠŠå¡ç‰‡çš„ç›´è§’è£æˆåœ“è§’</li>
            </ol>
          </div>
        </div>

        <p>
          æƒ³è¦åœ¨é€™è£¡é¡¯ç¤ºä½ çš„ç¤¾ç¾¤å—ï¼Ÿæ­¡è¿
          <a class="minorLink" href="https://github.com/AndyAWD/CommunityCardOrg" target="_blank">åƒèˆ‡å”ä½œ</a> æˆ–
          <a class="minorLink" href="https://forms.gle/38EgveLNs8WdKT5v7" target="_blank">å¡«å¯«è¡¨å–®</a> å§
        </p>
      </div>
    </div>
  </body>
</html>
